<div class="row">
    <div class="col-md-12">
        <div class="box p-a">
            <div ng-class="pageView=='form' ? 'b-b p-b m-b' : ''">
                <span class="text text-dark" translate>label.stepNodes</span>
                <div class="inline pull-right" style="margin-top: -2px">
                    <span ng-if="tabActive=='tab1' && pageView == 'form'">
<!--                    <button class="btn btn-sm btn-grey m-l-sm" ng-click="importJob()">
                      <i class="fa fa-upload"></i>
                      <span translate>joe.button.importJob</span>
                    </button>-->
                        <button class="btn btn-sm btn-grey m-l-sm" ng-click="openSidePanel('parameter')">
                            <i class="fa fa-tasks"></i>
                            <span translate>joe.button.parameter</span>
                        </button>
                        <button class="btn btn-sm btn-grey m-l-sm" ng-click="openSidePanel('returnCodes')">
                            <i class="fa fa-retweet"></i>
                            <span translate>joe.button.returnCodes</span>
                         </button>
                    </span>
                    <span ng-if="pageView == 'graph'">
                        <div class="btn-group m-r-sm">
                            <label class="md-check">
                                <input ng-model="config.showErrorNodes" ng-change="loadGraph()" type="checkbox"><i class="primary"></i>
                                <span translate>label.showErrorNodes</span>
                            </label>
                        </div>
                    </span>
                    <span ng-if="pageView == 'graph'">
                       <div id="tools" class="inline">
                            <ul class="nav navbar-nav navbar-nav-inline nav-active-border3 ">
                                <li class="nav-item dropdown-separator">
                                    <span class="separator"></span>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" uib-tooltip="{{'tooltip.zoomIn' | translate}}"
                                       ng-click="zoomIn()">
                                        <span class="nav-text"> <i class="icon1-Zoom-In"></i></span>
                                    </a>
                                </li>
                                <li class="nav-item dropdown-separator">
                                    <span class="separator"></span>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" uib-tooltip="{{'tooltip.zoomOut' | translate}}"
                                       ng-click="zoomOut()">
                                        <span class="nav-text"> <i class="icon1-Zoom-Out"></i></span>
                                    </a>
                                </li>
                                <li class="nav-item dropdown-separator">
                                    <span class="separator"></span>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" uib-tooltip="{{'tooltip.default' | translate}}"
                                       ng-click="actual()">
                                        <span class="nav-text"> <i class="icon1-Actual-size"></i></span>
                                    </a>
                                </li>
                                <li class="nav-item dropdown-separator">
                                    <span class="separator"></span>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" uib-tooltip="{{'tooltip.fit' | translate}}"
                                       ng-click="fit()">
                                        <span class="nav-text"> <i class="icon1-fit-to-width"></i></span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </span>
                    <span>
                        <div class="btn-group m-l-sm">
                            <button class="btn btn-sm btn-grey" ng-model="pageView" uib-btn-radio="'graph'"
                                    ng-class="{'btn-primary': pageView=='graph'}" ng-click="setView('graph')">
                                <i class="fa fa-link"></i>
                            </button>
                            <button class="btn btn-sm btn-grey" ng-model="pageView" uib-btn-radio="'form'"
                                    ng-class="{'btn-primary': pageView=='form'}" ng-click="setView('form')">
                                <i class="fa fa-align-justify"></i>
                            </button>
                        </div>
                    </span>
                </div>
            </div>
            <div ng-if="pageView == 'form'">
                <form name="myForm">
                    <div class="form-group row">
                        <div class="p-a-sm m-l-xs m-r-xs p-t-0">
                            <div class="b-b">
                                <ul class="nav nav-tabs">
                                    <li class="nav-item">
                                        <a class="nav-link active" ng-click="changeActiveTab('tab1')" href
                                           data-toggle="tab" data-target="#tab1" translate>joe.tab.nodes</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" ng-click="changeActiveTab('tab2')" href data-toggle="tab"
                                           data-target="#tab2" translate>joe.tab.fileOrderSource</a>
                                    </li>
                                </ul>
                            </div>
                            <div class="tab-content p-t-md">
                                <div class="tab-pane animated fadeIn active" id="tab1">
                                    <div class="form-group row"
                                         ng-class="{ 'has-error' : myForm.state.$invalid && myForm.state.$dirty }">
                                        <label class="col-md-4 col-lg-3 form-control-label"
                                               translate>joe.label.state</label>
                                        <div class="col-md-8 col-lg-6">
                                            <input type="text" required ng-maxlength="255" class="form-control"
                                                   placeholder="Enter State" autofocus name="state"
                                                   ng-model="node.state">
                                            <div class="text-danger help-block" ng-if="myForm.state.$dirty"
                                                 ng-messages="myForm.state.$error">
                                                <div ng-message="required" translate>message.requiredError</div>
                                                <div ng-message="maxlength" translate>message.tooLongError</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row" ng-if="node.nodeType==='Full Node'">
                                        <label class="col-md-4 col-lg-3 form-control-label" translate>label.job</label>
                                        <div class="col-md-8 col-lg-6">
                                            <div class="row">
                                                <div class="col-md-12 col-lg-12">
                                                    <select class="form-control" name="nextState" ng-required="node.nodeType==='Full Node'"
                                                            ng-model="node.job" style="border: none"
                                                            ng-options="job.name as job.name for job in jobs">
                                                    </select>
                                                    <div class="input-dropdown" style="margin-bottom: -27px;top: -28px">
                                                        <input type="text" class="form-control" placeholder="{{'placeholder.enterJobPath' | translate}}"
                                                               name="StepNodesJob" ng-model="node.job">
                                                    </div>
                                                    <i class="fa fa-folder-o inside-textBox" style="right: -20px;" ng-click="getJobTreeStructure()" aria-hidden="true"></i>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row" ng-if="node.nodeType==='Full Node'">
                                        <label class="col-md-4 col-lg-3 form-control-label" translate>joe.label.nextState</label>
                                        <div class="col-md-8 col-lg-6">
                                            <select class="form-control" name="nextState" ng-required="node.nodeType==='Full Node'"
                                                    ng-model="node.nextState" style="border: none"
                                                    ng-options="next for next in _nextState">
                                            </select>
                                            <div class="input-dropdown" style="margin-bottom: -27px;top: -28px">
                                                <input name="nextState" class="form-control" ng-model="node.nextState" type="text">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row" ng-if="node.nodeType==='Full Node'">
                                        <label class="col-md-4 col-lg-3 form-control-label" translate>joe.label.errorState</label>
                                        <div class="col-md-8 col-lg-6">
                                            <select class="form-control"  name="errorState" ng-required="node.nodeType==='Full Node'"
                                                    ng-model="node.errorState" style="border: none"
                                                    ng-options="err for err in _errorState">
                                                <option value="?" selected="selected"></option>
                                            </select>
                                            <div class="input-dropdown" style="margin-bottom: -27px;top: -28px">
                                                <input name="errorState" class="form-control" ng-model="node.errorState" type="text">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row" ng-if="node.nodeType!=='End Node'">
                                        <label class="col-md-4 col-lg-3 form-control-label" translate>label.delay</label>
                                        <div class="col-md-8 col-lg-6">
                                            <input type="number" min="0" class="form-control" name="stepNodesDelay" ng-model="node.delay">
                                        </div>
                                    </div>
                                    <div class="form-group row" ng-if="node.nodeType==='Full Node'">
                                        <label class="col-md-4 col-lg-3 form-control-label" translate>joe.label.onError</label>
                                        <div class="col-md-8 col-lg-6">
                                            <select class="form-control" name="err" ng-model="node.onError">
                                                <option ng-repeat="err in _onError" value="{{err}}">{{err}}</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group row" ng-if="node.nodeType == 'File Sink'">
                                        <label class="col-md-4 col-lg-3 form-control-label" translate>joe.label.removeFile</label>
                                        <div class="col-md-8 col-lg-6 p-t-xs">
                                            <label class="md-check lg-check">
                                                <input type="checkbox" name="stepNodesRemove"
                                                       ng-click="node.moveTo = ''" ng-model="node.remove">
                                                <i class="primary"></i>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group row" ng-if="node.nodeType == 'File Sink'">
                                        <label class="col-md-4 col-lg-3 form-control-label"
                                               translate>joe.label.moveTo</label>
                                        <div class="col-md-8 col-lg-6">
                                            <input type="text" class="form-control" ng-disabled="node.remove" name="StepNodesMoveTo" ng-model="node.moveTo">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-md-4 col-lg-3 form-control-label" translate=""></label>
                                        <div class="col-md-8 col-lg-6">
                                            <label class="md-check w">
                                                <input type="radio" name="stepNodesNodeType"
                                                       ng-model="node.nodeType" value="Full Node"
                                                       class="ng-pristine ng-untouched ng-valid ng-not-empty">
                                                <i class="primary"></i> <span translate>joe.label.fullNode</span>
                                            </label>
                                            <label class="md-check w">
                                                <input type="radio" name="stepNodesNodeType"
                                                       ng-model="node.nodeType" value="End Node"
                                                       class="ng-pristine ng-untouched ng-valid ng-not-empty">
                                                <i class="primary"></i> <span translate>joe.label.endNode</span>
                                            </label>
                                            <label class="md-check w">
                                                <input type="radio" name="stepNodesNodeType"
                                                       ng-model="node.nodeType" value="File Sink"
                                                       class="ng-pristine ng-untouched ng-valid ng-not-empty">
                                                <i class="primary"></i> <span translate>joe.label.fileSink</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-md-12">
                                            <button class="btn btn-sm btn-primary" ng-click="applyNode(myForm)">
                                                <span translate>button.done</span>
                                            </button>
                                            <button class="btn btn-sm btn-grey m-l-sm" ng-if="_tempNode" ng-click="cancelNode(myForm)">
                                                <span translate>button.cancel</span>
                                            </button>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="p-t-sm">
                                        <table class="table table-hover table-bordered ">
                                            <thead>
                                            <tr>
                                                <th class="menu"><span translate>label.action</span></th>
                                                <th><span translate>joe.label.state</span></th>
                                                <th><span translate>label.node</span></th>
                                                <th><span translate>joe.label.jobDirectory</span></th>
                                                <th><span translate>joe.label.nextState</span></th>
                                                <th><span translate>joe.label.errorState</span></th>
                                                <th><span translate>joe.label.onError</span></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="stepNode in jobChain.jobChainNodes |  orderBy: 'job'">
                                                <td>
                                                    <div class="btn-group dropdown">
                                                        <button type="button" class="btn-drop more-option-h" dropdown
                                                                data-toggle="dropdown">
                                                            <i class="fa fa-ellipsis-h"></i>
                                                        </button>
                                                        <div class="dropdown-menu list-dropdown dropdown-ac dropdown-more"
                                                             role="menu">
                                                            <a ng-click="removeNode(stepNode);" class="dropdown-item"
                                                               translate="">button.remove</a>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td class="cursor" ng-click="editNode(stepNode);">{{stepNode.state}}
                                                </td>
                                                <td class="cursor" ng-click="editNode(stepNode);">{{stepNode.job ? 'Job'
                                                    : 'Endnode'}}
                                                </td>
                                                <td class="cursor" ng-click="editNode(stepNode);">{{stepNode.job}}</td>
                                                <td class="cursor" ng-click="editNode(stepNode);">
                                                    {{stepNode.nextState}}
                                                </td>
                                                <td class="cursor" ng-click="editNode(stepNode);">
                                                    {{stepNode.errorState}}
                                                </td>
                                                <td class="cursor" ng-click="editNode(stepNode);">{{stepNode.onError}}
                                                </td>
                                            </tr>
                                            <tr ng-repeat="fileOrder in jobChain.fileOrderSinks">
                                                <td>
                                                    <div class="btn-group dropdown">
                                                        <button type="button" class="btn-drop more-option-h" dropdown=""
                                                                data-toggle="dropdown">
                                                            <i class="fa fa-ellipsis-h"></i>
                                                        </button>
                                                        <div class="dropdown-menu list-dropdown dropdown-ac dropdown-more"
                                                             role="menu">
                                                            <a ng-click="removeNode(fileOrder, true);"
                                                               class="dropdown-item"
                                                               translate="">button.remove</a>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td class="cursor" ng-click="editNode(fileOrder, true);">
                                                    {{fileOrder.state}}
                                                </td>
                                                <td class="cursor" ng-click="editNode(fileOrder, true);">
                                                    {{'FileSink'}}
                                                </td>
                                                <td class="cursor" ng-click="editNode(fileOrder, true);">
                                                    {{fileOrder.moveTo}}
                                                </td>
                                                <td class="cursor" ng-click="editNode(fileOrder, true);"></td>
                                                <td class="cursor" ng-click="editNode(fileOrder, true);"></td>
                                                <td class="cursor" ng-click="editNode(fileOrder, true);"></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="tab-pane animated fadeIn" id="tab2">
                                    <div class="form-group row" ng-class="{ 'has-error' : myForm.fileOrderSourceDirectory.$invalid && myForm.fileOrderSourceDirectory.$dirty }">
                                        <label class="col-md-4 col-lg-3 form-control-label" translate>joe.label.directory</label>
                                        <div class="col-md-8 col-lg-6">
                                            <input type="text" class="form-control" required
                                                   name="fileOrderSourceDirectory" ng-model="fileOrder.directory">
                                            <div class="text-danger help-block" ng-if="myForm.fileOrderSourceDirectory.$dirty"
                                                 ng-messages="myForm.fileOrderSourceDirectory.$error">
                                                <div ng-message="required" translate>message.requiredError</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-md-4 col-lg-3 form-control-label"
                                               translate>joe.label.regex</label>
                                        <div class="col-md-8 col-lg-6">
                                            <input type="text" class="form-control" name="stepNodesFileOrderSourceRegex"
                                                   ng-model="fileOrder.regex">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-md-4 col-lg-3 form-control-label" translate>joe.label.delayAfterError</label>
                                        <div class="col-md-8 col-lg-6">
                                            <input type="number" min="0" class="form-control" name="stepNodesFileOrderSourceDelayAfterError"
                                                   ng-model="fileOrder.delayAfterError">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-md-4 col-lg-3 form-control-label"
                                               translate>joe.label.repeat</label>
                                        <div class="col-md-8 col-lg-6">
                                            <input type="text" class="form-control"
                                                   name="stepNodesFileOrderSourceRepeat" ng-model="fileOrder.repeat">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-md-4 col-lg-3 form-control-label" translate>joe.label.nextState</label>
                                        <div class="col-md-8 col-lg-6">
                                            <input type="text" class="form-control"
                                                   name="stepNodesFileOrderSourceNextState" ng-model="fileOrder.nextState">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-md-4 col-lg-3 form-control-label" translate>joe.label.alertWhenDirectoryMissing</label>
                                        <div class="col-md-8 col-lg-6 p-t-xs">
                                            <label class="md-check lg-check">
                                                <input type="checkbox" name="stepNodesFileOrderSourceAlertWhenDirectoryMissing"
                                                       ng-model="fileOrder.alertWhenDirectoryMissing">
                                                <i class="primary"></i>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-md-12">
                                            <button class="btn btn-sm btn-primary" ng-click="applyFileOrder(myForm)">
                                                <span translate>button.done</span>
                                            </button>
                                            <button class="btn btn-sm btn-grey m-l-sm" ng-if="_tempFileOrder" ng-click="cancelFileOrder(myForm)">
                                                <span translate>button.cancel</span>
                                            </button>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="b-a p-a-sm bg-transparent">
                                        <table class="table table-hover table-bordered">
                                            <thead>
                                            <tr>
                                                <th class="menu"><span translate>label.action</span></th>
                                                <th><span translate>joe.label.directory</span></th>
                                                <th><span translate>joe.label.regex</span></th>
                                                <th><span translate>joe.label.nextState</span></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="fileorder in jobChain.fileOrderSources">
                                                <td>
                                                    <div class="btn-group dropdown">
                                                        <button type="button" class="btn-drop more-option-h" dropdown
                                                                data-toggle="dropdown">
                                                            <i class="fa fa-ellipsis-h"></i>
                                                        </button>
                                                        <div class="dropdown-menu list-dropdown dropdown-ac dropdown-more"
                                                             role="menu">
                                                            <a ng-click="removeFileOrder(fileorder);"
                                                               class="dropdown-item"
                                                               translate="">button.remove</a>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td class="cursor" ng-click="editFileOrder(fileorder);">
                                                    {{fileorder.directory}}
                                                </td>
                                                <td class="cursor" ng-click="editFileOrder(fileorder);">
                                                    {{fileorder.regex}}
                                                </td>
                                                <td class="cursor" ng-click="editFileOrder(fileorder);">
                                                    {{fileorder.nextState}}
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div id="rightSideBar" ng-if="obj.title" class="slideInRight" ng-click="isSideBarClicked($event)">
        <div class="close-btn" >
          <i class="fa fa-times" ng-click="closeSidePanel()"></i>
        </div>
        <div class="text-center m-b text">
          <span class="_600 b-b p-b-sm m-l-sm">{{obj.title | translate}}</span>
        </div>
    <div class="p-a" ng-if="obj.type == 'parameter'">
        <div class="form-group row m-b-0" ng-repeat="param in order.params.paramList track by $index">
          <div class="col-sm-5 m-b-sm" ng-if="$index==0" translate>label.name</div>
          <div class="col-sm-6 m-b-sm" ng-if="$index==0" translate>label.value</div>
          <div class="col-sm-5 m-b-sm">
            <input type="text" class="form-control" ng-model="param.name"
                   placeholder="{{'placeholder.name' | translate}} {{$index+1}}">
          </div>

          <div class="col-sm-6 m-b-sm">
            <input type="text" class="form-control" ng-model="param.value"
                   placeholder="{{'placeholder.value' | translate}} {{$index+1}}">
          </div>
          <div class="col-sm-1 p-l-0">
            <a><i ng-click="removeParams($index)" class="fa fa-times m-t-sm text-muted"></i></a>
          </div>
        </div>
        <div class="form-group row text-left">
          <div class="col-sm-12">
            <a href class="text-u-l" ng-if="order.params.paramList.length>0" ng-click="addParameter()"
               translate>button.addAnotherParameter</a>
            <a href class="text-u-l" ng-if="order.params.paramList.length==0" ng-click="addParameter()"
               translate>button.addParameter</a>
          </div>
        </div>
    </div>

    <div class="col-md-12 text-left" ng-if="obj.type == 'returnCodes'">
        //TODO
    </div>
  </div>
</div>
<div ng-show="pageView=='graph'">
    <div>
        <div class="row m-l-0">
            <div class="col-md-1 col-sm-12" id="toolbarContainer">
                <ul>
                    <li class="p-b-sm b-b m-l-xs m-r-xs">
                        <div class="btn btn-sm btn-block btn-default" ng-click="getTreeStructure()">
                            <i class="fa fa-upload"></i>
                            <span translate>joe.button.browse</span>
                        </div>
                    </li>
                    <li class="p-b-xs b-b">
                        <div class="draggable" draggable="true" ondragstart="drag(event)" id="myorder">
                            <i class="icon-orders-icon" style="position: relative;top: 2px"></i>
                            <span translate>label.order</span>
                        </div>
                    </li>
                    <li>
                        <div class="draggable" draggable="true" ondragstart="drag(event)"
                             id="{{job.name}}" ng-repeat="job in jobs | orderBy:'name' track by $index">
                            <span data-toggle="tooltip" data-placement="bottom" data-original-title="{{job.name}}">{{job.name}}</span>
                        </div>
                    </li>
                </ul>
                <ul ng-repeat="(key, value) in _jobs | groupBy: 'path1' track by $index">
                    <li>
                        <p class="p-l m-l-xs" data-toggle="tooltip" data-placement="bottom"
                           data-original-title="{{key}}" tooltip-placement="bottom">
                            <i class="fa fa-folder-o pos-abt" style="margin-top: 3px; margin-left: -16px"></i> {{key}}
                        </p>
                        <div class="draggable" draggable="true" ondragstart="drag(event)"
                             id="{{job.path}}" ng-repeat="job in value | orderBy:'name' track by $index">
                            <span data-toggle="tooltip" data-placement="bottom" data-original-title="{{job.name}}">{{job.name}}</span>
                        </div>
                    </li>
                </ul>
                <ul ng-if="jobs.length == 0 && _jobs.length == 0">
                    <li>
                        <div class="text-center" translate>
                            message.noJobsFound
                        </div>
                    </li>
                </ul>
            </div>
            <div class="col-md-11 col-sm-12">
                <div class="graph-container">
                    <div class="box-shadow-z1" id="graph" ondragover="allowDrop(event)"></div>
                    <div id="dropContainer" class="dropContainer" style="top:2px">
                        <div class="dropContainer" translate>message.dropHereToDetach</div>
                    </div>
                    <div id="outlineContainer2"></div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="objectModal" tabindex="-1" role="dialog" aria-labelledby="user" data-backdrop="static">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-body p-a" style="min-height: 400px;max-height: 550px; overflow: auto">
                <div>
                    <a class="text" ng-click="filter_tree.expand_all();"
                       uib-tooltip="{{'tooltip.expandAll' | translate}}">
                        <i class="fa fa-angle-double-down fa-lg"></i>
                    </a>
                    <a class="text m-l-xs" ng-click="filter_tree.collapse_all();"
                       uib-tooltip="{{'tooltip.collapseAll' | translate}}">
                        <i class="fa fa-angle-double-up fa-lg"></i>
                    </a>
                    <tree
                            tree-data="tree"
                            tree-control="filter_tree"
                            object="object"
                            icon-leaf="fa fa-folder"
                            icon-expand="fa fa-folder"
                            icon-collapse="fa fa-folder-open"
                            expand-on="expanding_property"
                            on-select="treeHandler1(branch)"
                            on-click="treeHandler(branch)"
                            template-url="modules/core/template/object-tree-filter-structure.html">
                    </tree>
                </div>
            </div>
            <div class="modal-footer ">
                <button type="button" class="btn btn-primary btn-sm pull-left" ng-click="addJobs()" data-dismiss="modal"
                        translate>button.done
                </button>
                <button type="button" class="btn btn-grey btn-sm m-l-sm pull-left" data-dismiss="modal" translate>button.cancel
                </button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="orderModal" tabindex="-1" role="dialog" aria-labelledby="user" data-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true" class="fa fa-times-circle"></span>
                </button>
                <h4 class="modal-title" translate>joe.label.addOrderToJobChain</h4>
            </div>
            <div class="modal-body p-a" style="min-height: 180px;max-height: 550px; overflow: auto">
                <div ng-repeat="order in orders">
                    <label class="md-check">
                        <input data-checklist-model="ordersObj.ids" data-checklist-value="order" type="checkbox"><i class="primary"></i>
                        {{order.orderId}}
                    </label>
                </div>
                <div ng-if="orders.length== 0" class="text-center m-t m-b h6 text-uppercase" translate>
                    message.noOrdersFound
                </div>
            </div>
            <div class="modal-footer ">
                <button type="button" class="btn btn-primary btn-sm pull-left" ng-disabled="ordersObj.ids.length === 0" ng-click="addOrders()" data-dismiss="modal"
                        translate>button.done
                </button>
                <button type="button" class="btn btn-grey btn-sm m-l-sm pull-left" data-dismiss="modal"
                        ng-click="cancelModel()" translate>button.cancel
                </button>
            </div>
        </div>
    </div>
</div>
<script>
    function allowDrop(ev) {
        if (ev.target.tagName && ev.target.tagName.toLowerCase() === 'svg') {
            ev.preventDefault();
        } else if (ev.target.tagName && ev.target.tagName.toLowerCase() === 'div') {
            if (ev.target.className && ev.target.className.match(/job/)) {
                ev.preventDefault();
            } else if (ev.target.childElementCount > 0) {
                let className = ev.target.childNodes[0].className;
                if (className.match(/job/)) {
                    ev.preventDefault();
                } else {
                    return false;
                }
            }
        } else {
            return false;
        }
    }

    function drag(ev) {
        ev.dataTransfer.setData("data", ev.target.id);
        window.selectedJob = ev.target.id;
    }
</script>
